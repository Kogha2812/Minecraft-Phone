<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Phone Minecraft</title>
<style>
  body {
    margin: 0; padding: 0;
    background: #000;
    color: #32ff7e;
    font-family: monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  #phone {
    width: 360px;
    height: 640px;
    background: #111;
    border: 4px solid #32ff7e;
    border-radius: 20px;
    box-shadow: 0 0 20px #32ff7e;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  #screen {
    flex: 1;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    background: transparent;
  }
  #screen > div {
    display: none;
    flex-direction: column;
    height: 100%;
  }
  #screen > div.active {
    display: flex;
  }
  h1 {
    margin: 0 0 10px 0;
    font-size: 1.5em;
    text-align: center;
    letter-spacing: 1.5px;
  }
  .app-grid {
    margin-top: 20px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
  }
  .app-icon {
    border: 2px solid #32ff7e;
    border-radius: 12px;
    background: #222;
    padding: 15px 0;
    text-align: center;
    cursor: pointer;
    user-select: none;
    transition: background 0.25s, color 0.25s;
    font-size: 1.1em;
  }
  .app-icon:hover {
    background: #32ff7e;
    color: #000;
  }
  .app-icon span {
    display: block;
    font-size: 2em;
    margin-bottom: 6px;
  }
  button.back-btn {
    align-self: flex-start;
    margin-bottom: 15px;
    background: none;
    border: 1.5px solid #32ff7e;
    color: #32ff7e;
    padding: 8px 16px;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.25s, color 0.25s;
  }
  button.back-btn:hover {
    background: #32ff7e;
    color: #000;
  }
  /* Cam√©ra */
  #camera video {
    width: 100%;
    border-radius: 12px;
    background: black;
    flex-grow: 1;
    object-fit: cover;
  }
  /* Musique */
  #music-controls {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 10px;
  }
  #music-controls button {
    background: #222;
    border: 2px solid #32ff7e;
    color: #32ff7e;
    padding: 10px 15px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 1em;
  }
  #music-controls button:hover {
    background: #32ff7e;
    color: #000;
  }
  #track-list {
    margin-top: 15px;
    overflow-y: auto;
    max-height: 120px;
  }
  #track-list div {
    padding: 8px;
    cursor: pointer;
    border-radius: 8px;
  }
  #track-list div:hover, #track-list .active-track {
    background: #32ff7e;
    color: #000;
  }
  /* Messages */
  #messages-list {
    background: #111;
    border-radius: 8px;
    flex-grow: 1;
    padding: 10px;
    overflow-y: auto;
    font-size: 0.9em;
    margin-bottom: 10px;
  }
  #messages-list p {
    margin: 6px 0;
    word-wrap: break-word;
  }
  #message-form {
    display: flex;
    gap: 10px;
  }
  #message-input {
    flex-grow: 1;
    padding: 8px;
    border-radius: 8px;
    border: 1.5px solid #32ff7e;
    background: #222;
    color: #32ff7e;
    font-family: monospace;
  }
  #message-form button {
    background: #32ff7e;
    border: none;
    color: #000;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
  }
  #message-form button:hover {
    background: #27ae60;
  }
</style>
</head>
<body>
  <div id="phone">
    <div id="screen">
      <div id="home" class="active">
        <h1>Mon T√©l√©phone</h1>
        <div class="app-grid">
          <div class="app-icon" onclick="openApp('camera')"><span>üì∑</span>Cam√©ra</div>
          <div class="app-icon" onclick="openApp('music')"><span>üéµ</span>Musique</div>
          <div class="app-icon" onclick="openApp('messages')"><span>üí¨</span>Messages</div>
          <div class="app-icon" onclick="openApp('settings')"><span>‚öôÔ∏è</span>Param√®tres</div>
        </div>
      </div>

      <!-- Cam√©ra -->
      <div id="camera">
        <button class="back-btn" onclick="goHome()">‚Üê Retour</button>
        <h1>Cam√©ra</h1>
        <video autoplay playsinline></video>
        <p id="cam-error" style="color:#f55; margin-top:10px; display:none;">Impossible d'acc√©der √† la cam√©ra.</p>
      </div>

      <!-- Musique -->
      <div id="music">
        <button class="back-btn" onclick="goHome()">‚Üê Retour</button>
        <h1>Musique</h1>
        <audio id="audio-player" controls style="width:100%; border-radius:8px; background:#222;"></audio>
        <div id="music-controls">
          <button onclick="prevTrack()">‚èÆÔ∏è</button>
          <button onclick="playPause()">‚ñ∂Ô∏è/‚è∏Ô∏è</button>
          <button onclick="nextTrack()">‚è≠Ô∏è</button>
        </div>
        <div id="track-list"></div>
      </div>

      <!-- Messages -->
      <div id="messages">
        <button class="back-btn" onclick="goHome()">‚Üê Retour</button>
        <h1>Messages</h1>
        <div id="messages-list"></div>
        <form id="message-form">
          <input type="text" id="message-input" placeholder="√âcrire un message..." autocomplete="off" />
          <button type="submit">Envoyer</button>
        </form>
      </div>

      <!-- Param√®tres -->
      <div id="settings">
        <button class="back-btn" onclick="goHome()">‚Üê Retour</button>
        <h1>Param√®tres</h1>
        <p>Interface en d√©veloppement...</p>
      </div>
    </div>
  </div>

<script>
  // Navigation apps
  function openApp(id) {
    document.querySelectorAll('#screen > div').forEach(el => el.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if(id === 'camera') startCamera();
  }
  function goHome() {
    stopCamera();
    openApp('home');
  }

  // --- Cam√©ra ---
  let stream = null;
  const video = document.querySelector('#camera video');
  const camError = document.getElementById('cam-error');

  async function startCamera() {
    if(stream) return; // d√©j√† d√©marr√©e
    camError.style.display = 'none';
    try {
      stream = await navigator.mediaDevices.getUserMedia({ video: true });
      video.srcObject = stream;
    } catch(e) {
      camError.style.display = 'block';
      console.error("Erreur cam√©ra:", e);
    }
  }
  function stopCamera() {
    if(stream) {
      stream.getTracks().forEach(track => track.stop());
      stream = null;
      video.srcObject = null;
    }
  }

  // --- Musique ---
  const tracks = [
    { title: "Calm Forest", url: "https://cdn.pixabay.com/download/audio/2022/08/21/audio_6db95a26e6.mp3?filename=calm-forest-ambient-nature-10936.mp3" },
    { title: "Relaxing Piano", url: "https://cdn.pixabay.com/download/audio/2021/12/14/audio_38dbe7a438.mp3?filename=relaxing-piano-13793.mp3" },
    { title: "Upbeat Happy", url: "https://cdn.pixabay.com/download/audio/2022/04/14/audio_7b1c08f97f.mp3?filename=upbeat-happy-10825.mp3" }
  ];
  let currentTrackIndex = 0;
  const audioPlayer = document.getElementById('audio-player');
  const trackListEl = document.getElementById('track-list');

  function loadTrack(index) {
    currentTrackIndex = index;
    audioPlayer.src = tracks[index].url;
    audioPlayer.play();
    updateTrackList();
  }
  function updateTrackList() {
    trackListEl.innerHTML = '';
    tracks.forEach((track, i) => {
      const div = document.createElement('div');
      div.textContent = track.title;
      if(i === currentTrackIndex) div.classList.add('active-track');
      div.onclick = () => loadTrack(i);
      trackListEl.appendChild(div);
    });
  }
  function playPause() {
    if(audioPlayer.paused) audioPlayer.play();
    else audioPlayer.pause();
  }
  function nextTrack() {
    let next = (currentTrackIndex + 1) % tracks.length;
    loadTrack(next);
  }
  function prevTrack() {
    let prev = (currentTrackIndex - 1 + tracks.length) % tracks.length;
    loadTrack(prev);
  }
  // Charger la premi√®re piste au d√©marrage musique
  document.getElementById('music').addEventListener('click', () => {
    if(!audioPlayer.src) loadTrack(currentTrackIndex);
  });

  // --- Messages ---
  const messagesList = document.getElementById('messages-list');
  const messageForm = document.getElementById('message-form');
  const messageInput = document.getElementById('message-input');

  function loadMessages() {
    const saved = localStorage.getItem('phoneMessages');
    if(saved) {
      const messages = JSON.parse(saved);
      messagesList.innerHTML = '';
      messages.forEach(msg => {
        const p = document.createElement('p');
        p.textContent = msg;
        messagesList.appendChild(p);
      });
      messagesList.scrollTop = messagesList.scrollHeight;
    }
  }
  function saveMessages() {
    const msgs = [];
    messagesList.querySelectorAll('p').forEach(p => msgs.push(p.textContent));
    localStorage.setItem('phoneMessages', JSON.stringify(msgs));
  }
  messageForm.addEventListener('submit', e => {
    e.preventDefault();
    const text = messageInput.value.trim();
    if(text === '') return;
    const p = document.createElement('p');
    p.textContent = `Moi: ${text}`;
    messagesList.appendChild(p);
    messageInput.value = '';
    messagesList.scrollTop = messagesList.scrollHeight;
    saveMessages();
  });
  loadMessages();
</script>
</body>
</html>
